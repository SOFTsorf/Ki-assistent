<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEXUS AI</title>
    
    <link rel="icon" type="image/png" href="https://lh3.googleusercontent.com/u/0/d/1pXbyGi8BJZnLxTUFP4dE1lNQ3KBsvvJk">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">

    <style>
        :root {
            --bg-dark: #0b0b0c;
            --accent-green: #00ff88;
            --bubble-user: #2b2c2f;
            --bubble-ai: #18191b;
            --text-main: #e8e8e8;
            --border-glass: rgba(255, 255, 255, 0.12);
        }

        body {
            margin: 0; background: var(--bg-dark); color: var(--text-main);
            font-family: -apple-system, system-ui, sans-serif; overflow: hidden; height: 100vh;
        }

        /* HEADER */
        .header-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 65px;
            background: rgba(11, 11, 12, 0.75); backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px); border-bottom: 1px solid var(--border-glass);
            display: flex; align-items: center; padding: 0 20px; z-index: 1000;
        }

        .header-bar img { height: 40px; width: auto; border-radius: 6px; cursor: pointer; transition: 0.3s; }
        .header-bar img:active { transform: scale(0.9); }

        #chat-area {
            height: calc(100vh - 120px); padding: 85px 20px 20px 20px; 
            overflow-y: auto; display: flex; flex-direction: column; gap: 20px;
        }

        .bubble { padding: 14px 20px; border-radius: 18px; max-width: 80%; line-height: 1.6; position: relative; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .user { align-self: flex-end; background: var(--bubble-user); border-bottom-right-radius: 4px; }
        .ai { align-self: flex-start; background: var(--bubble-ai); border: 1px solid rgba(255,255,255,0.05); border-bottom-left-radius: 4px; padding-bottom: 40px; }

        .copyright { text-align: center; font-size: 11px; color: rgba(255, 255, 255, 0.2); padding: 10px 0 40px 0; width: 100%; order: 9999; }

        /* ADMIN POPUP STYLE */
        .modal {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px); z-index: 3000; align-items: center; justify-content: center;
        }
        .modal-content {
            background: #1c1c1e; padding: 30px; border-radius: 24px; width: 85%; max-width: 400px;
            border: 1px solid var(--border-glass); text-align: center;
        }
        .modal-content h3 { margin-top: 0; color: var(--accent-green); }
        .admin-input {
            width: 100%; padding: 12px; margin: 15px 0; background: #2c2c2e; border: 1px solid #444;
            border-radius: 12px; color: white; box-sizing: border-box; font-size: 16px;
        }
        .admin-btn {
            background: var(--accent-green); color: black; border: none; padding: 12px 25px;
            border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%;
        }
        .close-modal { color: #888; font-size: 13px; margin-top: 15px; cursor: pointer; display: block; }

        /* FOOTER */
        .footer { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: center; z-index: 100; }
        .pill {
            display: flex; align-items: center; width: 92%; max-width: 650px;
            background: rgba(30, 31, 33, 0.7); backdrop-filter: blur(30px);
            border-radius: 30px; padding: 6px 18px; border: 1px solid var(--border-glass);
        }
        input { flex: 1; background: none; border: none; outline: none; color: white; padding: 12px; }
        .icon-btn svg { fill: #a0a0a0; width: 22px; }
    </style>
</head>
<body>

    <div class="header-bar">
        <img src="https://lh3.googleusercontent.com/u/0/d/1pXbyGi8BJZnLxTUFP4dE1lNQ3KBsvvJk" alt="NEXUS Logo" onclick="checkAdmin()">
    </div>

    <div id="admin-modal" class="modal">
        <div class="modal-content" id="modal-inner">
            </div>
    </div>

    <div id="chat-area">
        <div class="bubble ai">NEXUS System bereit. Benachrichtigungs-Schnittstelle aktiv.</div>
        <div class="copyright" id="copyright-tag">(c) 2026 - by Patrick Roth</div>
    </div>

    <div class="footer">
        <div class="pill">
            <input type="text" id="input-field" placeholder="Nachricht..." autocomplete="off">
        </div>
    </div>

    <script>
        const ADMIN_CODE = "19012014";

        function checkAdmin() {
            const modal = document.getElementById('admin-modal');
            const inner = document.getElementById('modal-inner');
            modal.style.display = 'flex';
            
            inner.innerHTML = `
                <h3>Admin Zugriff</h3>
                <p>Bitte Code eingeben:</p>
                <input type="password" id="code-entry" class="admin-input" placeholder="****">
                <button class="admin-btn" onclick="verifyCode()">Bestätigen</button>
                <span class="close-modal" onclick="closeModal()">Abbrechen</span>
            `;
        }

        function verifyCode() {
            const input = document.getElementById('code-entry').value;
            if(input === ADMIN_CODE) {
                showAdminMenu();
            } else {
                alert("Falscher Code!");
                closeModal();
            }
        }

        function showAdminMenu() {
            const inner = document.getElementById('modal-inner');
            inner.innerHTML = `
                <h3>Broadcast</h3>
                <p>Nachricht an alle Nutzer senden:</p>
                <textarea id="push-msg" class="admin-input" rows="3" placeholder="Deine Nachricht..."></textarea>
                <button class="admin-btn" onclick="sendPush()">Jetzt senden</button>
                <span class="close-modal" onclick="closeModal()">Menü schließen</span>
            `;
            // Fordert Erlaubnis an, falls noch nicht geschehen
            if (Notification.permission !== "granted") {
                Notification.requestPermission();
            }
        }

        function sendPush() {
            const msg = document.getElementById('push-msg').value;
            if(!msg) return;

            // Lokale Demo-Benachrichtigung (für den Sender sichtbar)
            if (Notification.permission === "granted") {
                new Notification("NEXUS Broadcast", { body: msg, icon: "https://lh3.googleusercontent.com/u/0/d/1pXbyGi8BJZnLxTUFP4dE1lNQ3KBsvvJk" });
                alert("Nachricht wurde an die Broadcast-Schnittstelle gesendet!");
                closeModal();
            } else {
                alert("Bitte Benachrichtigungen im Browser erlauben!");
            }
            
            // Hier würde normalerweise der Fetch-Befehl an deinen Server (z.B. Firebase) stehen:
            // fetch('/api/send-push', { method: 'POST', body: JSON.stringify({text: msg}) });
        }

        function closeModal() {
            document.getElementById('admin-modal').style.display = 'none';
        }

        // Einfaches Chat-Script
        document.getElementById('input-field').onkeypress = (e) => {
            if (e.key === 'Enter' && e.target.value) {
                const text = e.target.value;
                const d = document.createElement('div');
                d.className = "bubble user";
                d.innerText = text;
                const area = document.getElementById('chat-area');
                area.insertBefore(d, document.getElementById('copyright-tag'));
                e.target.value = "";
                area.scrollTop = area.scrollHeight;
            }
        };
    </script>
</body>
</html>
